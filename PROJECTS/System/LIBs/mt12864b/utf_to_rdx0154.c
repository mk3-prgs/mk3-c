#include <stdint.h>
//
///////////////////////////////////////////////////////////////
//uint8_t utf_d0[];
//uint8_t utf_d1[];

const uint8_t utf_d0[] = {
0x90, 0x80, // А
0x91, 0x81, // Б
0x92, 0x82, // В
0x93, 0x83, // Г
0x94, 0x84, // Д
0x95, 0x85, // Е
0x96, 0x86, // Ж
0x97, 0x87, // З
0x98, 0x88, // И
0x99, 0x89, // Й
0x9a, 0x8a, // К
0x9b, 0x8b, // Л
0x9c, 0x8c, // М
0x9d, 0x8d, // Н
0x9e, 0x8e, // О
0x9f, 0x8f, // П
0xa0, 0x90, // Р
0xa1, 0x91, // С
0xa2, 0x92, // Т
0xa3, 0x93, // У
0xa4, 0x94, // Ф
0xa5, 0x95, // Х
0xa6, 0x96, // Ц
0xa7, 0x97, // Ч
0xa8, 0x98, // Ш
0xa9, 0x99, // Щ
0xaa, 0x9a, // Ъ
0xab, 0x9b, // Ы
0xac, 0x9c, // Ь
0xad, 0x9d, // Э
0xae, 0x9e, // Ю
0xaf, 0x9f, // Я
0xb0, 0xa0, // а
0xb1, 0xa1, // б
0xb2, 0xa2, // в
0xb3, 0xa3, // г
0xb4, 0xa4, // д
0xb5, 0xa5, // е
0xb6, 0xa6, // ж
0xb7, 0xa7, // з
0xb8, 0xa8, // и
0xb9, 0xa9, // й
0xba, 0xaa, // к
0xbb, 0xab, // л
0xbc, 0xac, // м
0xbd, 0xad, // н
0xbe, 0xae, // о
0xbf, 0xaf, // п
0x81, 0xff, // Ё
};

const uint8_t utf_d1[] = {
0x80, 0xb0, // р
0x81, 0xb1, // с
0x82, 0xb2, // т
0x83, 0xb3, // у
0x84, 0xb4, // ф
0x85, 0xb5, // х
0x86, 0xb6, // ц
0x87, 0xb7, // ч
0x88, 0xb8, // ш
0x89, 0xb9, // щ
0x8a, 0xba, // ъ
0x8b, 0xbb, // ы
0x8c, 0xbc, // ь
0x8d, 0xbd, // э
0x8e, 0xbe, // ю
0x8f, 0xbf, // я
0x91, 0xff, // ё
};

int u_d0=0;
int u_d1=0;

char conv(char c)
{
char ret=c;
	//
	if(u_d0) {
        if((c >= 0x90)&&(c <= 0xbf)) {
            ret = utf_d0[(2 * (c-0x90))+1]; // А ... п
            }
        else if(c==0x81) ret = utf_d0[1]; // Ё
        }
    else if(u_d1) {
        if((c >= 0x80)&&(c <= 0x8f)) {
            ret = utf_d1[(2 * (c-0x80))+1]; // п ... я
            }
        else if(c==0x91) ret = utf_d1[33]; // Ё
        }
	else ret = c;
    //
	return(ret);
}

